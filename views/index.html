<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- SEO Meta Tags -->
    <title>Spotify Recently Played - View Your Music History</title>
    <meta name="description" content="Securely view your recently played tracks from Spotify. No data storage, complete privacy protection.">
    <meta name="keywords" content="spotify, recently played, music, tracks, history, privacy">
    <meta name="author" content="Doug">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Spotify Recently Played">
    <meta property="og:description" content="Securely view your recently played tracks from Spotify">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://spotify-recentlyplayed.glitch.me">
    <meta property="og:image" content="https://spotify-recentlyplayed.glitch.me/og-image.png">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Spotify Recently Played">
    <meta name="twitter:description" content="Securely view your recently played tracks from Spotify">
    
    <!-- Security Headers -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:;">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    
    <!-- Performance -->
    <!-- All assets are now served locally -->
    
    <!-- Stylesheets -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  </head>
  <body class="bg-light">
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="visually-hidden-focusable">Skip to main content</a>
    
    <div class="container-fluid py-5">
      <!-- Header -->
      <header class="text-center py-5" role="banner">
        <div class="container">
          <h1 class="display-4 fw-bold text-primary mb-3">
            <i class="bi bi-spotify" aria-hidden="true"></i> 
            <span>Spotify Recently Played</span>
          </h1>
          <p class="lead text-muted">
            This site does NOT record ANY of your data. You can view the source to verify by remixing below
          </p>
        </div>
      </header>

      <!-- Main Content -->
      <main id="main-content" class="container" role="main">
        <div class="row justify-content-center">
          <div class="col-lg-8">
            <!-- Action Buttons -->
            <section aria-label="Authentication controls" class="d-grid gap-2 d-md-flex justify-content-md-center mb-4">
              <button 
                class="btn btn-primary btn-lg px-4" 
                id="login"
                type="button"
                aria-describedby="login-description"
              >
                <i class="bi bi-box-arrow-in-right me-2" aria-hidden="true"></i>
                <span>Don't see anything? Log in!</span>
              </button>
              <a 
                href="/logout" 
                class="btn btn-outline-secondary btn-lg px-4"
                role="button"
                aria-label="Log out of Spotify"
              >
                <i class="bi bi-box-arrow-right me-2" aria-hidden="true"></i>
                <span>Logout</span>
              </a>
            </section>
            
            <div id="login-description" class="visually-hidden">
              Click this button to authenticate with Spotify and view your recently played tracks
            </div>

            <!-- Recently Played Content -->
            <section aria-label="Recently played tracks">
              <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                  <h2 class="card-title mb-0 h5">
                    <i class="bi bi-music-note-list me-2" aria-hidden="true"></i>
                    Your Recently Played Tracks
                  </h2>
                </div>
                <div class="card-body">
                  <div id="data-container-recent" role="region" aria-live="polite" aria-label="Recently played tracks list">
                    <div class="text-center text-muted py-4">
                      <i class="bi bi-music-note-beamed display-4 d-block mb-3" aria-hidden="true"></i>
                      <p class="mb-0">No tracks to display yet. Click "Log in" to get started!</p>
                    </div>
                  </div>
                </div>
              </div>
            </section>
          </div>
        </div>
      </main>

      <!-- Footer -->
      <footer class="mt-5 py-4 border-top border-light" role="contentinfo">
        <div class="container text-center">
          <p class="text-muted mb-0">
            Originally mixed on 
            <a href="https://glitch.com" target="_blank" rel="noopener noreferrer" class="text-decoration-none">
              Glitch.com
            </a>
          </p>
        </div>
      </footer>
    </div>

    <!-- Bootstrap Icons (local) -->
    <link rel="stylesheet" href="/css/bootstrap-icons.css">
    
    <!-- Bootstrap JS Bundle (local) -->
    <script src="/js/bootstrap.bundle.min.js" defer></script>
    
    <!-- Application Scripts -->
    <script src="/client.js" defer></script>
    
    <!-- Loading indicator for better UX -->
    <noscript>
      <div class="alert alert-warning" role="alert">
        <strong>JavaScript Required:</strong> This application requires JavaScript to function properly. Please enable JavaScript in your browser.
      </div>
    </noscript>
  </body>
</html>
